(ns plugins.item-lister.engine
  (:require
    [x.app-core.api :as a :refer [r]]
    [x.app-db.api :as db]))


;; ----------------------------------------------------------------------------
;; -- Helpers -----------------------------------------------------------------
;; ----------------------------------------------------------------------------

(defn lister-props-path [lister-id]
  (db/path ::item-listers lister-id))

;; ----------------------------------------------------------------------------
;; -- Helpers -----------------------------------------------------------------
;; ----------------------------------------------------------------------------

;; ----------------------------------------------------------------------------
;; -- Subscriptions -----------------------------------------------------------
;; ----------------------------------------------------------------------------

(defn get-items [db [_ lister-id]]
  (if-let
    [value-path (get-in db (db/path ::item-listers lister-id :value-path))]
    (get-in db value-path)))

(defn get-sort-by [db [_ lister-id]]
  (get-in db
    (db/path ::item-listers lister-id :sort-by)))

;; ----------------------------------------------------------------------------
;; -- Subscriptions -----------------------------------------------------------
;; ----------------------------------------------------------------------------